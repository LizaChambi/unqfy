const UnqfyFileSystem = require('./unqfyFileSystem');

class UnqfyProgram {
    constructor(commandSelector, consoleService) {
        this.commandSelector = commandSelector;
        this.consoleService = consoleService;
    }

    play(fileName){
        let unqfy = UnqfyFileSystem.getUNQfy(fileName);

        if(this.consoleService.existCommand()){
            let command = this.consoleService.command();
            let objectByParameters = this.consoleService.getObjectByArgs();
            let commandHandler = this.commandSelector.findHandler(command);

            if(commandHandler){
                commandHandler.handle(unqfy, objectByParameters);

                UnqfyFileSystem.saveUNQfy(unqfy, fileName);
            }else{
                console.log(`No se encontr√≥ un handler para el comando: ${command}`);
            }
        }else {
            console.log('Ingrese un comando!');
        }
    }
}

module.exports = UnqfyProgram;
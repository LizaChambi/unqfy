class UnqfyProgram {
    constructor(commandSelector, consoleService, unqfyFileSystem) {
        this.commandSelector = commandSelector;
        this.consoleService = consoleService;
        this.unqfyFileSystem = unqfyFileSystem;
    }

    play(fileName){
        let unqfy = this.unqfyFileSystem.getUNQfy(fileName);

        if(!this.consoleService.existCommand()){
            console.log('Ingrese un comando!');
        }

        let command = this.consoleService.command();
        let objectByParameters = this.consoleService.getObjectByArgs();
        let commandHandler = this.commandSelector.findHandler(command);

        if(!Boolean(commandHandler)){
            console.log(`No se encontr√≥ un handler para el comando: ${command}`);
        }

        try{
            commandHandler.handle(unqfy, objectByParameters);
            this.unqfyFileSystem.saveUNQfy(unqfy, fileName);
        } catch (error if error instanceof InvalidDataException) {
            error.log();
        }
    }
}

module.exports = UnqfyProgram;